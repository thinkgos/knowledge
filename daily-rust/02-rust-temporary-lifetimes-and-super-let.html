<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>(è¯‘)Rustä¸´æ—¶ç”Ÿå‘½å‘¨æœŸå’Œ&quot;Super Let&quot; - knowledge</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "../searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>â†</kbd> or <kbd>â†’</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">knowledge</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/thinkgos/knowledge" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="è¯‘rustä¸´æ—¶ç”Ÿå‘½å‘¨æœŸå’Œsuper-let1"><a class="header" href="#è¯‘rustä¸´æ—¶ç”Ÿå‘½å‘¨æœŸå’Œsuper-let1">(è¯‘)<code>Rust</code>ä¸´æ—¶ç”Ÿå‘½å‘¨æœŸå’Œ"Super Let"<sup class="footnote-reference" id="fr-1-1"><a href="#footnote-1">1</a></sup></a></h1>
<p>åœ¨<code>Rust</code>ä¸­, ä¸´æ—¶å˜é‡ç”Ÿå‘½å‘¨æœŸæ˜¯ä¸€ä¸ªå¤æ‚ä½†åˆç»å¸¸è¢«å¿½è§†çš„è¯é¢˜. åœ¨ä¸€äº›ç®€å•çš„æƒ…å†µä¸‹, <code>Rust</code>ä¼šè®©ä¸´æ—¶å˜é‡å­˜æ´»è¶³å¤Ÿé•¿çš„æ—¶é—´, è¿™æ ·æˆ‘ä»¬å°±ä¸å¿…è€ƒè™‘å®ƒä»¬äº†. ç„¶è€Œ, åœ¨å¾ˆå¤šæƒ…å†µä¸‹, æˆ‘ä»¬å¯èƒ½æ— æ³•ç«‹å³å¾—åˆ°æˆ‘ä»¬æƒ³è¦çš„ä¸œè¥¿.</p>
<p>åœ¨è¿™ç¯‡æ–‡ç« ä¸­, æˆ‘ä»¬å°†(é‡æ–°)å‘æ˜ä¸´æ—¶å˜é‡ç”Ÿå‘½å‘¨æœŸçš„è§„åˆ™, ä»‹ç»ä¸€äº›ä¸´æ—¶ç”Ÿå‘½å‘¨æœŸæ‰©å±•çš„ç”¨ä¾‹, å¹¶æ¢ç´¢ä¸€ç§æ–°çš„è¯­è¨€ç†å¿µ--<code>super let,</code>, ä¸ºæˆ‘ä»¬æä¾›æ›´å¤šæ§åˆ¶.</p>
<h2 id="ä¸´æ—¶å˜é‡"><a class="header" href="#ä¸´æ—¶å˜é‡">ä¸´æ—¶å˜é‡</a></h2>
<p>ä¸‹é¢æ˜¯ä¸€æ¡<code>Rust</code>è¯­å¥, æ²¡æœ‰ä¸Šä¸‹æ–‡, ä½¿ç”¨çš„æ˜¯ä¸´æ—¶<code>String</code>:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>f(&amp;String::from('ğŸ¦€'));
<span class="boring">}</span></code></pre></pre>
<p>è¿™ä¸ªä¸´æ—¶<code>String</code>çš„å­˜æ´»æ—¶é—´å¤šé•¿?å¦‚æœæˆ‘ä»¬ä»Šå¤©è®¾è®¡<code>Rust</code>, åŸºæœ¬ä¸Šæœ‰ä¸¤ç§é€‰æ‹©:</p>
<ol>
<li>åœ¨è°ƒç”¨ <code>f</code> ä¹‹å‰, å­—ç¬¦ä¸²ä¼šè¢«ç«‹å³ä¸¢å¼ƒ. æˆ–è€…</li>
<li>åªæœ‰åœ¨è°ƒç”¨ <code>f</code> å, å­—ç¬¦ä¸²æ‰ä¼šè¢«ä¸¢å¼ƒ.</li>
</ol>
<p>å¦‚æœæˆ‘ä»¬é€‰æ‹©æ–¹æ¡ˆ<strong>1</strong>, é‚£ä¹ˆä¸Šé¢çš„è¯­å¥å°†å§‹ç»ˆå¯¼è‡´å€Ÿç”¨æ£€æŸ¥é”™è¯¯, å› ä¸ºæˆ‘ä»¬ä¸èƒ½è®©<code>f</code>å€Ÿç”¨å·²ç»æ¶ˆå¤±çš„ä¸œè¥¿.
å› æ­¤, <code>Rust</code>é€‰æ‹©äº†æ–¹æ¡ˆ<strong>2</strong>: é¦–å…ˆåˆ†é…å­—ç¬¦ä¸², ç„¶åå°†å…¶å¼•ç”¨ä¼ é€’ç»™<code>f</code>, åªæœ‰åœ¨<code>f</code>è¿”å›å, æˆ‘ä»¬æ‰ä¼šä¸¢å¼ƒä¸´æ—¶å­—ç¬¦ä¸².</p>
<h3 id="åœ¨ä¸€ä¸ª-let-è¯­å¥ä¸­"><a class="header" href="#åœ¨ä¸€ä¸ª-let-è¯­å¥ä¸­">åœ¨ä¸€ä¸ª <code>let</code> è¯­å¥ä¸­</a></h3>
<p>ç°åœ¨æ˜¯ä¸€ä¸ªç¨éš¾çš„é—®é¢˜:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let a = f(&amp;String::from('ğŸ¦€'));
â€¦
g(&amp;a);
<span class="boring">}</span></code></pre></pre>
<p>å†æ¥: è¿™ä¸ªä¸´æ—¶<code>String</code>çš„å­˜æ´»æ—¶é—´å¤šé•¿?</p>
<ol>
<li>å­—ç¬¦ä¸²ä¼šåœ¨ <code>let</code> è¯­å¥ç»“æŸæ—¶ä¸¢å¼ƒ: å³åœ¨<code>f</code>è¿”å›ä¹‹å, ä½†åœ¨<code>g</code>è¢«è°ƒç”¨ä¹‹å‰. æˆ–è€…</li>
<li>å­—ç¬¦ä¸²ä¼šåœ¨è°ƒç”¨<code>g</code>ä¹‹åçš„åŒæ—¶<code>a</code>è¢«ä¸¢å¼ƒ.</li>
</ol>
<p>å¦‚æœ<code>f</code>è¢«å®šä¹‰ä¸º <code>fn f(s: &amp;str) -&gt; usize</code>(å¦‚<code>str::len</code>), é‚£ä¹ˆåœ¨<code>let</code>è¯­å¥åç«‹å³å»æ‰<code>String</code>å°±å®Œå…¨æ²¡é—®é¢˜äº†.</p>
<p>ä½†æ˜¯, å¦‚æœ<code>f</code>è¢«å®šä¹‰ä¸º <code>fn f(s: &amp;str) -&gt; &amp;[u8]</code>(å°±åƒ <code>str::as_bytes</code>), é‚£ä¹ˆ <code>a</code> å°±ä¼šä»ä¸´æ—¶å˜é‡ <code>String</code> ä¸­å€Ÿç”¨, å› æ­¤å¦‚æœæˆ‘ä»¬å°†<code>a</code>ä¿ç•™è¾ƒé•¿æ—¶é—´, å°±ä¼šå‡ºç°å€Ÿç”¨æ£€æŸ¥é”™è¯¯.</p>
<p>å¦‚æœé‡‡ç”¨æ–¹æ¡ˆ<strong>2</strong>, åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹éƒ½èƒ½æ­£å¸¸ç¼–è¯‘, ä½†æˆ‘ä»¬å¯èƒ½ä¼šåœ¨è¶…å‡ºå¿…è¦çš„å­˜æ´»æ—¶é—´å†…ä¿ç•™ä¸€ä¸ªä¸´æ—¶å˜é‡, è¿™å¯èƒ½ä¼šæµªè´¹èµ„æºæˆ–å¯¼è‡´å¾®å¦™çš„é”™è¯¯(ä¾‹å¦‚, å½“<code>MutexGuard</code>æ¯”é¢„æœŸæ—¶é—´æ™šä¸¢å¼ƒæ—¶ä¼šé€ æˆæ­»é”).</p>
<p>è¿™å¬èµ·æ¥åƒæ˜¯ç¬¬<strong>3</strong>ç§é€‰æ‹©: è®©å®ƒå–å†³äº<code>f</code>çš„ç­¾å.</p>
<p>ä½†æ˜¯, <code>Rust</code>çš„å€Ÿç”¨æ£€æŸ¥å™¨åªæ‰§è¡Œæ£€æŸ¥, å¹¶ä¸å½±å“ä»£ç çš„è¡Œä¸º. å‡ºäºå„ç§åŸå› , è¿™æ˜¯ä¸€ä¸ªéå¸¸é‡è¦å’Œæœ‰ç”¨çš„å±æ€§. ä¸¾ä¾‹æ¥è¯´, å°† <code>fn f(s:&amp;str)-&gt;&amp;[u8]</code>(è¿”å›å€¼å€Ÿç”¨å‚æ•°)æ”¹ä¸º <code>fn f(s:&amp;str)-&gt;&amp;'static[u8]</code>(è¿”å›å€¼ä¸å€Ÿç”¨å‚æ•°)å¹¶ä¸ä¼šæ”¹å˜è°ƒç”¨ä½ç½®çš„ä»»ä½•å†…å®¹, ä¾‹å¦‚ä¸´æ—¶å˜é‡è¢«ä¸¢å¼ƒçš„ä½ç½®.</p>
<p>å› æ­¤, åœ¨æ–¹æ¡ˆ<strong>1</strong>å’Œæ–¹æ¡ˆ<strong>2</strong>ä¹‹é—´, <code>Rust</code>é€‰æ‹©äº†æ–¹æ¡ˆ<strong>1</strong>: åœ¨<code>let</code>è¯­å¥æœ«å°¾åˆ é™¤ä¸´æ—¶å˜é‡. å¾ˆå®¹æ˜“æ‰‹åŠ¨å°†<code>String</code>ç§»åˆ°å•ç‹¬çš„<code>let</code>è¯­å¥ä¸­, è®©å®ƒä¿æŒæ›´é•¿çš„æ—¶é—´.</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let s = String::from('ğŸ¦€'); // Moved to its own `let` to give it a longer lifetime.
let a = f(&amp;s);
â€¦
g(&amp;a);
<span class="boring">}</span></code></pre></pre>
<h3 id="åœ¨åµŒå¥—è°ƒç”¨ä¸­"><a class="header" href="#åœ¨åµŒå¥—è°ƒç”¨ä¸­">åœ¨åµŒå¥—è°ƒç”¨ä¸­</a></h3>
<p>å¥½å§, å†æ¥ä¸€ä¸ª:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>g(f(&amp;String::from('ğŸ¦€')));
<span class="boring">}</span></code></pre></pre>
<p>åŒæ ·, æœ‰ä¸¤ç§é€‰æ‹©:</p>
<ol>
<li>åœ¨è°ƒç”¨<code>f</code>ä¹‹åã€è°ƒç”¨<code>g</code>ä¹‹å‰, å­—ç¬¦ä¸²è¢«ä¸¢å¼ƒ. æˆ–è€…</li>
<li>å­—ç¬¦ä¸²ä¼šåœ¨è¯­å¥ç»“æŸæ—¶ä¸¢å¼ƒ, æ‰€ä»¥æ˜¯åœ¨è°ƒç”¨<code>g</code>ä¹‹å.</li>
</ol>
<p>è¯¥ä»£ç æ®µä¸å‰ä¸€ä¸ªä»£ç æ®µå‡ ä¹å®Œå…¨ç›¸åŒ: ä¸´æ—¶<code>String</code>çš„å¼•ç”¨è¢«ä¼ é€’ç»™<code>f</code>, <code>f</code>çš„è¿”å›å€¼è¢«ä¼ é€’ç»™<code>g</code>.</p>
<p>ä¸è¿‡, æ–¹æ¡ˆ<strong>1</strong>å¯èƒ½æœ‰æ•ˆ, ä¹Ÿå¯èƒ½æ— æ•ˆ, è¿™å–å†³äº<code>f</code>çš„ç­¾å, è€Œæ–¹æ¡ˆ<strong>2</strong>å¯èƒ½ä¼šè®©ä¸´æ—¶å˜é‡å­˜æ´»æ›´é•¿çš„æ—¶é—´.</p>
<p>ä¸è¿‡, è¿™æ¬¡æ–¹æ¡ˆ<strong>1</strong>ä¼šç»™ç¨‹åºå‘˜å¸¦æ¥æ›´å¤šæƒŠå–œ. ä¾‹å¦‚, å³ä½¿æ˜¯ç®€å•çš„ <code>String::from('ğŸ¦€').as_bytes().contains(&amp;0x80)</code> ä¹Ÿæ— æ³•ç¼–è¯‘, å› ä¸ºå­—ç¬¦ä¸²ä¼šåœ¨ <code>as_bytes(f)</code> ä¹‹åã€<code>contains (g)</code> ä¹‹å‰è¢«åˆ é™¤.</p>
<p>ä¹Ÿå¯ä»¥è¯´, æŠŠä¸´æ—¶å˜é‡å¤šå­˜æ´»ä¸€æ®µæ—¶é—´çš„åå¤„è¦å°å¾—å¤š, å› ä¸ºä»–ä»¬åœ¨å£°æ˜ç»“æŸæ—¶ä»ç„¶ä¼šè¢«ä¸¢å¼ƒ.</p>
<p>å› æ­¤, Rusté€‰æ‹©äº†æ–¹æ¡ˆ<strong>2</strong>: æ— è®º<code>f</code>çš„ç­¾åå¦‚ä½•, å­—ç¬¦ä¸²éƒ½ä¼šä¸€ç›´å­˜åœ¨, ç›´åˆ°è¯­å¥ç»“æŸ, ç›´åˆ°<code>g</code>è¢«è°ƒç”¨.</p>
<h3 id="åœ¨ä¸€ä¸ª-if-è¯­å¥ä¸­"><a class="header" href="#åœ¨ä¸€ä¸ª-if-è¯­å¥ä¸­">åœ¨ä¸€ä¸ª <code>if</code> è¯­å¥ä¸­</a></h3>
<p>ç°åœ¨, æˆ‘ä»¬æ¥çœ‹çœ‹ç®€å•çš„ <code>if</code> è¯­å¥:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>if f(&amp;String::from('ğŸ¦€')) {
    â€¦
}
<span class="boring">}</span></code></pre></pre>
<p>åŒæ ·çš„é—®é¢˜: <code>String</code> ä½•æ—¶ä¸¢å¼ƒ?</p>
<ol>
<li>åœ¨ <code>if</code> çš„æ¡ä»¶æ±‚å€¼ä¹‹å, ä½†åœ¨ <code>if</code> çš„ä¸»ä½“æ‰§è¡Œä¹‹å‰(å³åœ¨<code>{</code>å¤„). æˆ–è€…</li>
<li>åœ¨ <code>if</code> ä¸»ä½“æ‰§è¡Œä¹‹å(å³åœ¨<code>}</code>å¤„).</li>
</ol>
<p>åœ¨è¿™ç§æƒ…å†µä¸‹, å°±æ²¡æœ‰ç†ç”±åœ¨<code>if</code>ä¸»ä½“ä¸­ä¿ç•™ä¸´æ—¶å€¼. æ¡ä»¶çš„ç»“æœæ˜¯ä¸€ä¸ªå¸ƒå°”å€¼(åªæœ‰<code>true</code>æˆ–<code>false</code>), é¡¾åæ€ä¹‰, è¿™å¹¶ä¸å€Ÿç”¨ä»»ä½•ä¸œè¥¿.</p>
<p>å› æ­¤, <code>Rust</code>é€‰æ‹©æ–¹æ¡ˆ<strong>1</strong>.</p>
<p>ä¾‹å¦‚, åœ¨ä½¿ç”¨ <code>Mutex::lock</code> æ—¶, å®ƒå°±ä¼šè¿”å›ä¸€ä¸ªä¸´æ—¶<code>MutexGuard</code>, å½“<code>Mutex</code>è¢«ä¸¢å¼ƒæ—¶, å®ƒå°±ä¼šè§£é”:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn example(m: &amp;Mutex&lt;String&gt;) {
    if m.lock().unwrap().is_empty() {
        println!("the string is empty!");
    }
}
<span class="boring">}</span></code></pre></pre>
<p>åœ¨è¿™é‡Œ, <code>m.lock().unwrap()</code>ä¸­çš„ä¸´æ—¶<code>MutexGuard</code>ä¼šåœ¨<code>.is_empty()</code>ä¹‹åä¸¢å¼ƒ, è¿™æ ·<code>Mutex</code>å°±ä¸ä¼šåœ¨<code>println</code>è¯­å¥ä¸­è¢«ä¸å¿…è¦åœ°é”å®š.</p>
<h3 id="åœ¨-if-let-è¯­å¥ä¸­"><a class="header" href="#åœ¨-if-let-è¯­å¥ä¸­">åœ¨ <code>if let</code> è¯­å¥ä¸­</a></h3>
<p>ä½† <code>if let</code>(å’Œ <code>match</code>)çš„æƒ…å†µæœ‰æ‰€ä¸åŒ, å› ä¸ºæ­¤æ—¶æˆ‘ä»¬çš„è¡¨è¾¾å¼å¹¶ä¸ä¸€å®šæ˜¯è¯„ä¼°å¸ƒå°”å€¼:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>if let â€¦ = f(&amp;String::from('ğŸ¦€')) {
    â€¦
}
<span class="boring">}</span></code></pre></pre>
<p>å†æ¬¡, æœ‰ä¸¤ç§é€‰æ‹©:</p>
<ol>
<li>åœ¨æ¨¡å¼åŒ¹é…ä¹‹åã€<code>if let</code> çš„æ­£æ–‡ä¹‹å‰(å³ <code>{</code> å¤„)åˆ é™¤å­—ç¬¦ä¸². æˆ–è€…ã€</li>
<li>åœ¨ <code>if let</code> ä¸»ä½“ä¹‹å(å³ <code>}</code> å¤„)åˆ é™¤å­—ç¬¦ä¸².</li>
</ol>
<p>è¿™ä¸€æ¬¡, æˆ‘ä»¬æœ‰ç†ç”±é€‰æ‹©æ–¹æ¡ˆ<strong>2</strong>è€Œä¸æ˜¯æ–¹æ¡ˆ<strong>1</strong>, åœ¨<code>if let</code>è¯­å¥æˆ–<code>match</code>ä¸­å€Ÿç”¨æ¨¡å¼æ˜¯å¾ˆå¸¸è§çš„.</p>
<p>å› æ­¤, åœ¨è¿™ç§æƒ…å†µä¸‹, Rusté€‰æ‹©äº†æ–¹æ¡ˆ<strong>2</strong>.</p>
<p>ä¾‹å¦‚, å¦‚æœæˆ‘ä»¬æœ‰ä¸€ä¸ª<code>Mutex&lt;Vec&lt;T&gt;&gt;</code>ç±»å‹çš„<code>vec</code>, ç¼–è¯‘èµ·æ¥å°±å¾ˆå¥½:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>if let Some(x) = vec.lock().unwrap().first() {
    // The mutex is still locked here. :)
    // This is necessary, because we're borrowing `x` from the `Vec`. (`x` is a `&amp;T`)
    println!("first item in vec: {x}");
}
<span class="boring">}</span></code></pre></pre>
<p>æˆ‘ä»¬ä»<code>m.lock().unwrap()</code>è·å¾—ä¸€ä¸ªä¸´æ—¶çš„<code>MutexGuard</code>, å¹¶ä½¿ç”¨<code>.first()</code>æ–¹æ³•å€Ÿç”¨ç¬¬ä¸€ä¸ªå…ƒç´ . ç”±äº<code>MutexGuard</code>åªåœ¨æœ€åä¸€ä¸ª <code>}</code>æ‰è¢«ä¸¢å¼ƒ, å› æ­¤å€Ÿç”¨å°†æŒç»­æ•´ä¸ª<code>if let</code>ä¸»ä½“.</p>
<p>ä¸è¿‡, åœ¨æœ‰äº›æƒ…å†µä¸‹, è¿™å¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„. ä¾‹å¦‚, å¦‚æœæˆ‘ä»¬ä½¿ç”¨<code>pop</code>ä»£æ›¿<code>first</code>, å®ƒè¿”å›çš„æ˜¯å€¼è€Œä¸æ˜¯å¼•ç”¨:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>if let Some(x) = vec.lock().unwrap().pop() {
    // The mutex is still locked here. :(
    // This is unnecessary, because we don't borrow anything from the `Vec`. (`x` is a `T`)
    println!("popped item from the vec: {x}");
}
<span class="boring">}</span></code></pre></pre>
<p>è¿™å¯èƒ½ä¼š<a href="https://marabos.nl/atomics/basics.html#lifetime-of-mutexguard">ä»¤äººæƒŠè®¶</a>, å¹¶å¯¼è‡´å¾®å¦™çš„é”™è¯¯æˆ–æ€§èƒ½é™ä½.</p>
<p>ä¹Ÿè®¸è¿™å°±æ˜¯<code>Rust</code>é€‰æ‹©é”™è¯¯æ–¹æ¡ˆçš„ä¸€ä¸ªè®ºæ®, ä¹Ÿè®¸è¿™å°±æ˜¯åœ¨æœªæ¥ç‰ˆæœ¬çš„<code>Rust</code>ä¸­æ”¹å˜è¿™ä¸€è§„åˆ™çš„ä¸€ä¸ªè®ºæ®. å…³äºå¦‚ä½•ä¿®æ”¹è¿™äº›è§„åˆ™çš„æƒ³æ³•, è¯·å‚é˜… <a href="https://smallcultfollowing.com/babysteps/blog/2023/03/15/temporary-lifetimes/">Nikoâ€™s blog post on this topic</a>.</p>
<p>ç›®å‰, è§£å†³æ–¹æ³•æ˜¯ä½¿ç”¨ä¸€ä¸ªå•ç‹¬çš„<code>let</code> è¯­å¥, å°†ä¸´æ—¶ç”Ÿå‘½å‘¨æœŸé™åˆ¶åœ¨è¯¥è¯­å¥ä¸­:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let x = vec.lock().unwrap().pop(); // The MutexGuard is dropped after this statement.
if let Some(x) = x {
    â€¦
}
<span class="boring">}</span></code></pre></pre>
<h2 id="ä¸´æ—¶ç”Ÿå‘½å‘¨æœŸæ‰©å±•"><a class="header" href="#ä¸´æ—¶ç”Ÿå‘½å‘¨æœŸæ‰©å±•">ä¸´æ—¶ç”Ÿå‘½å‘¨æœŸæ‰©å±•</a></h2>
<p>è¿™ç§æƒ…å†µå¦‚ä½•?</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let a = &amp;String::from('ğŸ¦€');
â€¦
f(&amp;a);
<span class="boring">}</span></code></pre></pre>
<p>ä¸¤ç§é€‰æ‹©:</p>
<ol>
<li>å­—ç¬¦ä¸²ä¼šåœ¨ <code>let</code> è¯­å¥çš„æœ«å°¾è¢«ä¸¢å¼ƒ. æˆ–è€…</li>
<li>åœ¨è°ƒç”¨ <code>f</code> å, å­—ç¬¦ä¸²ä¸ <code>a</code> åŒæ—¶è¢«åˆ é™¤.</li>
</ol>
<p>æ–¹æ¡ˆ<strong>1</strong> æ€»æ˜¯ä¼šå¯¼è‡´å€Ÿç”¨æ£€æŸ¥é”™è¯¯. å› æ­¤, æ–¹æ¡ˆ<strong>2</strong>å¯èƒ½æ›´æœ‰æ„ä¹‰. å¦‚ä»Š<code>Rust</code>ä¹Ÿç¡®å®æ˜¯è¿™æ ·å·¥ä½œçš„: ä¸´æ—¶ç”Ÿå‘½å‘¨æœŸè¢«æ‰©å±•äº†, å› æ­¤ä¸Šé¢çš„ä»£ç æ®µå¯ä»¥æ­£å¸¸ç¼–è¯‘.</p>
<p>è¿™ç§ä¸´æ—¶å˜é‡ç”Ÿå‘½å‘¨æœŸé•¿äºå®ƒåœ¨å£°æ˜ä¸­å‡ºç°çš„æ—¶é—´çš„ç°è±¡è¢«ç§°ä¸º<strong>ä¸´æ—¶ç”Ÿå‘½å‘¨æœŸæ‰©å±•</strong>.</p>
<p>ä¸´æ—¶ç”Ÿå‘½å‘¨æœŸæ‰©å±•å¹¶ä¸é€‚ç”¨äº<em><strong>æ‰€æœ‰</strong></em>å‡ºç°åœ¨<code>let</code>è¯­å¥ä¸­çš„ä¸´æ—¶å­—ç¬¦ä¸², æ­£å¦‚æˆ‘ä»¬å·²ç»çœ‹åˆ°çš„é‚£æ ·: <code>let a = f(&amp;String::from('ğŸ¦€'))</code>; ä¸­çš„ä¸´æ—¶å­—ç¬¦ä¸²ä¸ä¼šè¶…è¿‡ <code>let</code>è¯­å¥çš„ç”Ÿå‘½å‘¨æœŸ.</p>
<p>åœ¨<code>let a = &amp;f(&amp;String::from('ğŸ¦€'))</code>;(æ³¨æ„å¤šå‡ºçš„ <code>&amp;</code>)ä¸­, ä¸´æ—¶ç”Ÿå‘½å‘¨æœŸæ‰©å±•ç¡®å®é€‚ç”¨äºæœ€å¤–å±‚çš„<code>&amp;</code>, å®ƒå€Ÿç”¨äº†ä½œä¸º<code>f</code> è¿”å›å€¼çš„ä¸´æ—¶, ä½†ä¸é€‚ç”¨äºå†…å±‚çš„<code>&amp;</code>, å®ƒå€Ÿç”¨äº†<code>String</code>.</p>
<p>ä¾‹å¦‚, ç”¨<code>str::len</code> ä»£æ›¿<code>f</code>:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let a: &amp;usize = &amp;String::from('a').len();
<span class="boring">}</span></code></pre></pre>
<p>åœ¨è¿™é‡Œ, å­—ç¬¦ä¸²åœ¨ <code>let</code> è¯­å¥çš„æœ«å°¾è¢«åˆ é™¤, ä½† <code>.len()</code>è¿”å›çš„<code>usize</code>å’Œ<code>a</code>æ´»çš„ä¸€æ ·é•¿.</p>
<p>è¿™ä¸ä»…é™äº <code>let _ = &amp;...;</code> è¯­æ³•. ä¾‹å¦‚</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let a = Person {
    name: &amp;String::from('ğŸ¦€'), // Extended!
    address: &amp;String::from('ğŸ¦€'), // Extended!
};
<span class="boring">}</span></code></pre></pre>
<p>åœ¨ä¸Šé¢çš„ä»£ç æ®µä¸­, ä¸´æ—¶å­—ç¬¦ä¸²çš„ç”Ÿå‘½å‘¨æœŸå°†è¢«æ‰©å±•, å› ä¸ºå³ä½¿æˆ‘ä»¬å¯¹ <code>Person</code> ç±»å‹ä¸€æ— æ‰€çŸ¥, æˆ‘ä»¬ä¹Ÿå¯ä»¥è‚¯å®š, ç”Ÿå‘½å‘¨æœŸæ‰©å±•å¯¹äºç”Ÿæˆå¯¹è±¡ä¹‹åçš„å¯ç”¨æ€§æ˜¯å¿…è¦çš„.</p>
<p>å…³äº <code>let</code> è¯­å¥ä¸­å“ªäº›ä¸´æ—¶å˜é‡çš„ç”Ÿå‘½å‘¨æœŸä¼šè¢«å»¶é•¿, <a href="https://doc.rust-lang.org/stable/reference/destructors.html#temporary-lifetime-extension"><code>temporary lifetime extension in Rust Reference</code></a>ä¸­æœ‰è¯¦ç»†çš„è¯´æ˜, ä½†å®é™…ä¸Šåªé€‚ç”¨äºé‚£äº›ä»è¯­æ³•ä¸Šå°±èƒ½çœ‹å‡ºæœ‰å¿…è¦å»¶é•¿ç”Ÿå‘½å‘¨æœŸçš„è¡¨è¾¾å¼, è€Œä¸ä»»ä½•ç±»å‹ã€å‡½æ•°ç­¾åæˆ–ç‰¹è´¨å®ç°æ— å…³:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let a = &amp;temporary().field; // Extended!
let a = MyStruct { field: &amp;temporary() }; // Extended!
let a = &amp;MyStruct { field: &amp;temporary() }; // Both extended!
let a = [&amp;temporary()]; // Extended!
let a = { â€¦; &amp;temporary() }; // Extended!

let a = f(&amp;temporary()); // Not extended, because it might not be necessary.
let a = temporary().f(); // Not extended, because it might not be necessary.
let a = temporary() + temporary(); // Not extended, because it might not be necessary.
<span class="boring">}</span></code></pre></pre>
<p>è™½ç„¶è¿™çœ‹èµ·æ¥å¾ˆåˆç†, ä½†å½“æˆ‘ä»¬è€ƒè™‘åˆ°æ„é€ å…ƒç»„ç»“æ„æˆ–å…ƒç»„å˜ä½“çš„è¯­æ³•åªæ˜¯ä¸€ä¸ªå‡½æ•°è°ƒç”¨æ—¶, ç¡®å®ä¼šæ„Ÿåˆ°æ„å¤–: ä»è¯­æ³•ä¸Šè®², <code>Some(123)</code> æ˜¯å¯¹å‡½æ•° <code>Some</code> çš„å‡½æ•°è°ƒç”¨.</p>
<p>ä¾‹å¦‚:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let a = Some(&amp;temporary()); // Not extended! (Because `Some` could have any signature...)
let a = Some { 0: &amp;temporary() }; // Extended! (I bet you have never used this syntax.)
<span class="boring">}</span></code></pre></pre>
<p>è¿™å¯èƒ½ä¼šè®©äººç›¸å½“å›°æƒ‘.</p>
<p>è¿™ä¹Ÿæ˜¯å€¼å¾—è€ƒè™‘<a href="https://smallcultfollowing.com/babysteps/blog/2023/03/15/temporary-lifetimes/#design-principles">é‡æ–°ä¿®è®¢è§„åˆ™</a>çš„åŸå› ä¹‹ä¸€.</p>
<h3 id="æŒç»­æ¨å¹¿"><a class="header" href="#æŒç»­æ¨å¹¿">æŒç»­æ¨å¹¿</a></h3>
<p>ä¸´æ—¶ç”Ÿå‘½å‘¨æœŸæ‰©å±•å¾ˆå®¹æ˜“ä¸å¦ä¸€ç§å«ä¸æ–­æ™‹å‡çš„ä¸œè¥¿æ··æ·†, åè€…æ˜¯ä¸´æ—¶å˜é‡è·å¾—æ¯”é¢„æœŸç”Ÿå‘½å‘¨æœŸé•¿çš„å¦ä¸€ç§æ–¹å¼.</p>
<p>åœ¨<code>&amp;123</code>å’Œ<code>&amp;None</code>è¿™æ ·çš„è¡¨è¾¾å¼ä¸­, å€¼è¢«è®¤å®šä¸ºå¸¸é‡ï¼ˆ<a href="https://doc.rust-lang.org/stable/reference/destructors.html#constant-promotion">without interior mutability and without desctructors</a>ï¼‰, å› æ­¤ä¼šè‡ªåŠ¨æ™‹å‡ä¸ºæ°¸ç”Ÿå€¼. è¿™æ„å‘³ç€è¿™äº›å¼•ç”¨å°†å…·æœ‰<code>'static</code>ç”Ÿå‘½å‘¨æœŸ.</p>
<p>ä¾‹å¦‚:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let x = f(&amp;3); // The &amp;3 here is 'static, regardless if that's necessary for `f()`.
<span class="boring">}</span></code></pre></pre>
<p>This even applies to simple expressions:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let x = f(&amp;(1 + 2)); // The &amp;3 here is 'static.
<span class="boring">}</span></code></pre></pre>
<p>åœ¨åŒæ—¶é€‚ç”¨ä¸´æ—¶ç”Ÿå‘½å‘¨æœŸå»¶é•¿å’Œæ’å®šæå‡çš„æƒ…å†µä¸‹, åè€…ä¼˜å…ˆ, å› ä¸ºå®ƒå»¶é•¿çš„ç”Ÿå‘½å‘¨æœŸæœ€é•¿:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let x = &amp;1; // constant promotion, not temporary lifetime extension.
<span class="boring">}</span></code></pre></pre>
<p>ä¹Ÿå°±æ˜¯è¯´, åœ¨ä¸Šé¢çš„ä»£ç æ®µä¸­, <code>x</code>æ˜¯ä¸€ä¸ª<code>'static</code>å¼•ç”¨. å€¼<code>1</code>çš„å¯¿å‘½ç”šè‡³æ¯”<code>x</code>æœ¬èº«è¿˜é•¿.</p>
<h3 id="ä»£ç å—ä¸­çš„ä¸´æ—¶ç”Ÿå‘½å‘¨æœŸæ‰©å±•"><a class="header" href="#ä»£ç å—ä¸­çš„ä¸´æ—¶ç”Ÿå‘½å‘¨æœŸæ‰©å±•">ä»£ç å—ä¸­çš„ä¸´æ—¶ç”Ÿå‘½å‘¨æœŸæ‰©å±•</a></h3>
<p>æƒ³è±¡ä¸€ä¸‹, æˆ‘ä»¬æœ‰æŸç§<code>Writer</code>ç±»å‹, å®ƒæŒæœ‰ä¸€ä¸ªè¦å†™å…¥çš„æ–‡ä»¶çš„å¼•ç”¨:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct Writer&lt;'a&gt; {
    pub file: &amp;'a File
}
<span class="boring">}</span></code></pre></pre>
<p>ä»¥ä¸‹ä»£ç åˆ›å»ºäº†<code>Writer</code>, å†™å…¥æ–°åˆ›å»ºçš„æ–‡ä»¶:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>println!("opening file...");
let filename = "hello.txt";
let file = File::create(filename).unwrap();
let writer = Writer { file: &amp;file };
<span class="boring">}</span></code></pre></pre>
<p>ç°åœ¨çš„ä½œç”¨åŸŸåŒ…å«<code>filename</code>ã€<code>file</code>å’Œ<code>writer</code>. ç„¶è€Œ, åé¢çš„ä»£ç åªèƒ½é€šè¿‡
<code>Writer</code>å†™å…¥. ç†æƒ³çš„æƒ…å†µæ˜¯, åœ¨ä½œç”¨åŸŸä¸­å·²ç»çœ‹ä¸åˆ°<code>filename</code>, å°¤å…¶æ˜¯<code>file</code>.</p>
<p>ç”±äºä¸´æ—¶ç”Ÿå‘½å‘¨æœŸæ‰©å±•ä¹Ÿé€‚ç”¨äºä»£ç å—çš„æœ€ç»ˆè¡¨è¾¾å¼, å› æ­¤æˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼æ¥å®ç°:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let writer = {
    println!("opening file...");
    let filename = "hello.txt";
    Writer { file: &amp;File::create(filename).unwrap() }
};
<span class="boring">}</span></code></pre></pre>
<p>ç°åœ¨, <code>Writer</code>çš„åˆ›å»ºè¢«æ•´é½åœ°å°è£…åœ¨å®ƒè‡ªå·±çš„ä½œç”¨åŸŸä¸­, è¿™æ ·å¤–å±‚ä½œç”¨åŸŸåªèƒ½çœ‹åˆ° <code>writer</code>, è€Œçœ‹ä¸åˆ°å…¶ä»–ä»»ä½•ä¸œè¥¿.å¾—ç›Šäºä¸´æ—¶ç”Ÿå‘½å‘¨æœŸçš„æ‰©å±•, åœ¨å†…ä½œç”¨åŸŸä¸­ä½œä¸ºä¸´æ—¶åˆ›å»ºçš„<code>file</code>ä¸ <code>writer</code> ä¸€æ ·çš„å­˜æ´»æ—¶é—´.</p>
<h3 id="ä¸´æ—¶ç”Ÿå‘½å‘¨æœŸæ‰©å±•çš„é™åˆ¶"><a class="header" href="#ä¸´æ—¶ç”Ÿå‘½å‘¨æœŸæ‰©å±•çš„é™åˆ¶">ä¸´æ—¶ç”Ÿå‘½å‘¨æœŸæ‰©å±•çš„é™åˆ¶</a></h3>
<p>è¯•æƒ³ä¸€ä¸‹, å¦‚æœæˆ‘ä»¬å°†<code>Writer</code>ç»“æ„ä¸­çš„<code>file</code>å­—æ®µè®¾ç½®ä¸ºç§æœ‰, ä¼šæ˜¯æ€æ ·çš„ç»“æœï¼Ÿ</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct Writer&lt;'a&gt; {
    file: &amp;'a File
}

impl&lt;'a&gt; Writer&lt;'a&gt; {
    pub fn new(file: &amp;'a File) -&gt; Self {
        Self { file }
    }
}
<span class="boring">}</span></code></pre></pre>
<p>è¿™æ ·, æˆ‘ä»¬å°±ä¸éœ€è¦å¯¹åŸå§‹ç”¨æ³•ç‰‡æ®µåšå¤ªå¤šæ”¹åŠ¨äº†:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>println!("opening file...");
let filename = "hello.txt";
let file = File::create(filename).unwrap();
let writer = Writer::new(&amp;file); // Only this line changed.
<span class="boring">}</span></code></pre></pre>
<p>æˆ‘ä»¬åªéœ€è°ƒç”¨<code>Writer::new()</code>è€Œä¸æ˜¯ä½¿ç”¨<code>Writer {}</code>è¯­æ³•æ¥æ„å»º.</p>
<p>ä¸è¿‡, è¿™å¯¹ä½œç”¨åŸŸç‰ˆæœ¬æ— æ•ˆ:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let writer = {
    println!("opening file...");
    let filename = "hello.txt";
    Writer::new(&amp;File::create(filename).unwrap()) // Error: Does not live long enough!
};

writer.something(); // Error: File no longer alive here!
<span class="boring">}</span></code></pre></pre>
<p>æ­£å¦‚æˆ‘ä»¬ä¹‹å‰çœ‹åˆ°çš„, è™½ç„¶ä¸´æ—¶ç”Ÿå‘½å‘¨æœŸæ‰©å±•ä¼šé€šè¿‡<code>Writer {}</code>ç»“æ„è¯­æ³•ä¼ æ’­, ä½†ä¸ä¼šé€šè¿‡<code>Writer::new()</code>å‡½æ•°è°ƒç”¨è¯­æ³•ä¼ æ’­. (ä¾‹å¦‚, ç­¾åå¯ä»¥æ˜¯<code>fn new(&amp;File) -&gt; Self&lt;'static&gt;</code>æˆ–<code>fn new(&amp;File) -&gt; i32</code>, è¿™æ ·å°±ä¸éœ€è¦æ‰©å±•ä¸´æ—¶ç”Ÿå‘½å‘¨æœŸäº†).</p>
<p>é—æ†¾çš„æ˜¯, æˆ‘ä»¬æ— æ³•æ˜ç¡®é€‰æ‹©ä¸´æ—¶ç”Ÿå‘½å‘¨æœŸæ‰©å±•.æˆ‘ä»¬å¿…é¡»åœ¨æœ€å¤–å±‚ä½œç”¨åŸŸä¸­è®¾ç½®ä¸€ä¸ª<code>let file</code>.ç›®å‰æˆ‘ä»¬èƒ½åšçš„æœ€å¥½çš„åŠæ³•å°±æ˜¯ä½¿ç”¨å»¶è¿Ÿåˆå§‹åŒ–:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let file;
let writer = {
    println!("opening file...");
    let filename = "hello.txt";
    file = File::create(filename).unwrap();
    Writer::new(&amp;file)
};
<span class="boring">}</span></code></pre></pre>
<p>ä½†è¿™ä¼šä½¿<code>file</code>å›åˆ°ä½œç”¨åŸŸä¸­, è€Œè¿™æ­£æ˜¯æˆ‘ä»¬æƒ³è¦é¿å…çš„.</p>
<p>è™½ç„¶å¯ä»¥è¯´æŠŠ<code>let file</code>æ”¾åœ¨ä½œç”¨åŸŸå¤–éƒ¨å¹¶ä¸æ˜¯ä»€ä¹ˆå¤§é—®é¢˜, ä½†å¯¹äºå¤§å¤šæ•°<code>Rust</code>ç¨‹åºå‘˜æ¥è¯´, è¿™ç§å˜é€šæ–¹æ³•å¹¶ä¸æ˜æ˜¾.å»¶è¿Ÿåˆå§‹åŒ–å¹¶ä¸æ˜¯ä¸€ä¸ªå¸¸ç”¨çš„åŠŸèƒ½, ç¼–è¯‘å™¨ç›®å‰åœ¨ç»™å‡ºä¸´æ—¶ç”Ÿå‘½å‘¨æœŸé”™è¯¯æ—¶ä¹Ÿä¸ä¼šå»ºè®®é‡‡ç”¨è¿™ç§å˜é€šæ–¹æ³•. å³ä½¿ç¼–è¯‘å™¨å¯ä»¥è¿™æ ·åš, è¿™ä¹Ÿä¸æ˜¯ä¸€ä¸ªå°æ”¹åŠ¨.</p>
<p>å¦‚æœèƒ½ä»¥æŸç§æ–¹å¼è§£å†³è¿™ä¸ªé—®é¢˜å°±å¥½äº†</p>
<h3 id="macroså®"><a class="header" href="#macroså®">Macroså®</a></h3>
<p>å¦‚æœæœ‰ä¸€ä¸ªå‡½æ•°æ—¢èƒ½åˆ›å»ºæ–‡ä»¶, åˆèƒ½è¿”å›ä¸€ä¸ª <code>Writer</code> æ–‡ä»¶, å¯èƒ½ä¼šå¾ˆæœ‰ç”¨.æ¯”å¦‚</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let writer = Writer::new_file("hello.txt");
<span class="boring">}</span></code></pre></pre>
<p>ä½†æ˜¯, ç”±äº <code>Writer</code> åªå€Ÿç”¨<code>file</code>, è¿™å°±è¦æ±‚ <code>new_file</code> å°†<code>File</code>å­˜å‚¨åœ¨æŸä¸ªåœ°æ–¹.å®ƒå¯ä»¥<code>leak</code>è¿™ä¸ª<code>File</code>æˆ–ä»¥æŸç§æ–¹å¼å°†å…¶å­˜å‚¨åœ¨<code>static</code>ä¸­, ä½†(ç›®å‰)å®ƒæ²¡æœ‰åŠæ³•è®©<code>file</code>ä¸è¿”å›çš„ <code>Writer</code> ä¸€æ ·é•¿å­˜.</p>
<p>å› æ­¤, æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®æ¥å®šä¹‰æ–‡ä»¶å’Œå†™å…¥å™¨, æ— è®ºå®ƒåœ¨å“ªé‡Œè¢«è°ƒç”¨:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>macro_rules! let_writer_to_file {
    ($writer:ident, $filename:expr) =&gt; {
        let file = std::fs::File::create($filename).unwrap();
        let $writer = Writer::new(&amp;file);
    };
}
<span class="boring">}</span></code></pre></pre>
<p>ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let_writer_to_file!(writer, "hello.txt");

writer.something();
<span class="boring">}</span></code></pre></pre>
<p>ç”±äº<a href="https://veykril.github.io/tlborm/decl-macros/minutiae/hygiene.html">å®çš„å«ç”Ÿæ€§</a>, åœ¨æ­¤èŒƒå›´å†…æ— æ³•è®¿é—®<code>file</code>.</p>
<p>è¿™æ ·åšæ˜¯å¯è¡Œçš„, ä½†å¦‚æœå®ƒçœ‹èµ·æ¥æ›´åƒä¸€ä¸ªæ™®é€šçš„å‡½æ•°è°ƒç”¨, ä¸æ˜¯æ›´å¥½å—ï¼Ÿ</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>et writer = writer_to_file!("hello.txt");

writer.something();
<span class="boring">}</span></code></pre></pre>
<p>æ­£å¦‚æˆ‘ä»¬ä¹‹å‰æ‰€è§, åœ¨ <code>let writer = ...;</code>è¯­å¥ä¸­åˆ›å»ºä¸€ä¸ªå­˜æ´»æ—¶é—´è¶³å¤Ÿé•¿çš„ä¸´æ—¶<code>File</code>çš„æ–¹æ³•æ˜¯ä½¿ç”¨ä¸´æ—¶ç”Ÿå‘½å‘¨æœŸæ‰©å±•:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>macro_rules! writer_to_file {
    ($filename:expr) =&gt; {
        Writer { file: &amp;File::create($filename).unwrap() }
    };
}

let writer = writer_to_file!("hello.txt");
<span class="boring">}</span></code></pre></pre>
<p>è¿™å°†æ‰©å±•æˆ:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let writer = Writer { file: &amp;File::create("hello.txt").unwrap() };
<span class="boring">}</span></code></pre></pre>
<p>è¿™å°†åœ¨å¿…è¦æ—¶å»¶é•¿ä¸´æ—¶<code>File</code>çš„ç”Ÿå‘½å‘¨æœŸ.</p>
<p>ä½†å¦‚æœ<code>file</code>ä¸æ˜¯å…¬å¼€, æˆ‘ä»¬å°±ä¸èƒ½è¿™æ ·åš, è€Œéœ€è¦ä½¿ç”¨ <code>Writer::new()</code> ä»£æ›¿.å®éœ€è¦åœ¨è°ƒç”¨å®ƒçš„ <code>let writer = ...;</code>è¯­å¥ä¹‹å‰æ’å…¥ <code>let file</code>;.è¿™æ˜¯ä¸å¯èƒ½çš„.</p>
<h4 id="format_args"><a class="header" href="#format_args">format_args!()</a></h4>
<p>è¿™ä¸ªé—®é¢˜ä¹Ÿæ˜¯(ç°åœ¨)<code>format_args!()</code> çš„ç»“æœä¸èƒ½å­˜å‚¨åœ¨ <code>let</code> è¯­å¥ä¸­çš„åŸå› :</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let f = format_args!("{}", 1); // Error!
something.write_fmt(f);
<span class="boring">}</span></code></pre></pre>
<p>åŸå› æ˜¯ <code>format_args!()</code> ä¼šæ‰©å±•ä¸ºç±»ä¼¼ <code>fmt::Arguments::new(&amp;Argument::display(&amp;arg), ...)</code> çš„å†…å®¹, å…¶ä¸­ä¸€äº›å‚æ•°æ˜¯å¯¹ä¸´æ—¶å˜é‡çš„å¼•ç”¨.</p>
<p>ä¸´æ—¶ç”Ÿå‘½å‘¨æœŸæ‰©å±•ä¸é€‚ç”¨äºå‡½æ•°è°ƒç”¨çš„å‚æ•°, å› æ­¤ <code>fmt::Arguments</code> å¯¹è±¡åªèƒ½åœ¨åŒä¸€è¯­å¥ä¸­ä½¿ç”¨.</p>
<h4 id="pin"><a class="header" href="#pin">pin!()</a></h4>
<p>å¦ä¸€ç§ç»å¸¸é€šè¿‡å®åˆ›å»ºçš„ç±»å‹æ˜¯ <code>Pin</code>.ç²—ç•¥åœ°è¯´, å®ƒè¡¨ç¤ºå¯¹æŸä¸ªæ°¸è¿œä¸ä¼šç§»åŠ¨çš„ä¸œè¥¿çš„å¼•ç”¨.(å…·ä½“ç»†èŠ‚å¾ˆå¤æ‚, ä½†ç°åœ¨ä¸æ˜¯å¾ˆé‡è¦).</p>
<p>å®ƒæ˜¯é€šè¿‡ä¸€ä¸ªåä¸º <code>Pin::new_unchecked</code> çš„<code>unsafe</code>å‡½æ•°åˆ›å»ºçš„, å› ä¸ºæˆ‘ä»¬éœ€è¦ä¿è¯å®ƒæ‰€å¼•ç”¨çš„å€¼å³ä½¿åœ¨ <code>Pin</code> æœ¬èº«æ¶ˆå¤±åä¹Ÿä¸ä¼šè¢«ç§»åŠ¨.</p>
<p>ä½¿ç”¨è¯¥å‡½æ•°çš„æœ€ä½³æ–¹æ³•æ˜¯ä½¿ç”¨<a href="https://doc.rust-lang.org/rust-by-example/variable_bindings/scope.html"><code>shadowing</code></a>:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let mut thing = Thing { â€¦ };
let thing = unsafe { Pin::new_unchecked(&amp;mut thing) };
<span class="boring">}</span></code></pre></pre>
<p>å› ä¸ºç¬¬äºŒä¸ª<code>thing</code>ä¼šå¯¹ç¬¬ä¸€ä¸ª<code>thing</code>äº§ç”Ÿ<code>shadow</code>, æ‰€ä»¥ç¬¬ä¸€ä¸ª<code>thing</code>(ä»ç„¶å­˜åœ¨)ä¸èƒ½å†è¢«å‘½å.å› ä¸ºå®ƒä¸èƒ½è¢«å‘½å, æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç¡®å®šå®ƒä¸èƒ½è¢«ç§»åŠ¨(å³ä½¿åœ¨æ”¾å¼ƒç¬¬äºŒä¸ª<code>thing</code>å), è¿™æ­£æ˜¯æˆ‘ä»¬åœ¨<code>unsafe</code>å—ä¸­æ‰€æ‰¿è¯ºçš„.</p>
<p>å› ä¸ºè¿™æ˜¯ä¸€ç§å¸¸è§çš„æ¨¡å¼, æ‰€ä»¥é€šå¸¸ç”¨å®æ¥æ•è·è¿™ç§æ¨¡å¼.</p>
<p>ä¾‹å¦‚, æˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ª <code>let_pin</code> å®å¦‚ä¸‹:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>macro_rules! let_pin {
    ($name:ident, $init:expr) =&gt; {
        let mut $name = $init;
        let $name = unsafe { Pin::new_unchecked(&amp;mut $name) };
    };
}
<span class="boring">}</span></code></pre></pre>
<p>ä½¿ç”¨æ–¹æ³•ä¸ä¹‹å‰çš„ <code>let_writer_to_file</code> å®ç±»ä¼¼:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let_pin!(thing, Thing { â€¦ });

thing.something();
<span class="boring">}</span></code></pre></pre>
<p>è¿™æ ·åšå¯ä»¥å¾ˆå¥½åœ°å°è£…å’Œéšè—ä¸å®‰å…¨ä»£ç .</p>
<p>ä½†æ˜¯, å°±åƒæˆ‘ä»¬çš„ <code>Writer</code> ç¤ºä¾‹ä¸€æ ·, å¦‚æœå®ƒèƒ½åƒä¸‹é¢è¿™æ ·å·¥ä½œ, ä¸æ˜¯æ›´å¥½å—ï¼Ÿ</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let thing = pin!(Thing { â€¦ });
<span class="boring">}</span></code></pre></pre>
<p>æˆ‘ä»¬éƒ½çŸ¥é“, è¦åšåˆ°è¿™ä¸€ç‚¹, æˆ‘ä»¬å¿…é¡»åˆ©ç”¨ä¸´æ—¶ç”Ÿå‘½å‘¨æœŸæ‰©å±•åŠŸèƒ½, ä½¿<code>Thing</code>çš„ç”Ÿå‘½å‘¨æœŸè¶³å¤Ÿé•¿.è€Œè¦åšåˆ°è¿™ä¸€ç‚¹, æˆ‘ä»¬å¿…é¡»ä½¿ç”¨ <code>Pin {}</code> è¯­æ³•æ¥æ„é€  <code>Pin:Pin { pinned: &amp;mut Thing { ... }}</code> ä¼šè°ƒç”¨ä¸´æ—¶ç”Ÿå‘½å‘¨æœŸæ‰©å±•, ä½† P<code>in::new_unchecked(&amp;mut Thing { ... })</code> ä¸ä¼š.</p>
<p>è¿™å°±æ„å‘³ç€è¦å°† <code>Pin</code> çš„å­—æ®µå…¬å¼€, è¿™å°±è¿èƒŒäº† <code>Pin</code> çš„åˆè¡·.åªæœ‰åœ¨å­—æ®µæ˜¯ç§æœ‰çš„æƒ…å†µä¸‹, å®ƒæ‰èƒ½æä¾›æœ‰æ„ä¹‰çš„ä¿è¯.</p>
<p>è¿™æ„å‘³ç€, ä¸å¹¸çš„æ˜¯, (å¦‚ä»Š)ä¸å¯èƒ½è‡ªå·±ç¼–å†™è¿™æ ·ä¸€ä¸ª <code>pin!()</code> å®.</p>
<p>æ ‡å‡†åº“è¿˜æ˜¯è¿™ä¹ˆåšäº†, çŠ¯äº†ä¸€ä¸ªå¯æ€•çš„ç½ªè¡Œ:<code>Pin</code> çš„ "ç§æœ‰ "å­—æ®µå®é™…ä¸Šè¢«å®šä¹‰ä¸º <code>pub</code>, ä½†ä¹Ÿè¢«æ ‡è®°ä¸º "ä¸ç¨³å®š", å¦‚æœä½ è¯•å›¾ä½¿ç”¨å®ƒ, ç¼–è¯‘å™¨å°±ä¼šæŠ±æ€¨.</p>
<p>å¦‚æœä¸éœ€è¦è¿™ç§é»‘å®¢æ‰‹æ®µå°±å¥½äº†.</p>
<h2 id="super-let"><a class="header" href="#super-let"><code>super let</code></a></h2>
<h3 id="ç”¨æˆ·ä½“éªŒå’Œè¯Šæ–­"><a class="header" href="#ç”¨æˆ·ä½“éªŒå’Œè¯Šæ–­">ç”¨æˆ·ä½“éªŒå’Œè¯Šæ–­</a></h3>
<h3 id="å¯èƒ½çš„æ‰©å±•"><a class="header" href="#å¯èƒ½çš„æ‰©å±•">å¯èƒ½çš„æ‰©å±•</a></h3>
<p>æœªæ¥å¯èƒ½çš„æ‰©å±•æ˜¯å…è®¸åœ¨å‡½æ•°ä½œç”¨åŸŸä¸­ä½¿ç”¨<code>super let</code>. ä¹Ÿå°±æ˜¯è¯´, "super"æŒ‡çš„æ˜¯å‡½æ•°çš„è°ƒç”¨è€….</p>
<p>æ­£å¦‚<a href="https://hachyderm.io/@lorepozo@tech.lgbt/111499621692587962">@lorepozo@tech.lgbt</a>åœ¨Mastodonä¸Šæåˆ°çš„, è¿™å°†ä½¿ <code>pin!()</code> æˆä¸ºä¸€ä¸ªå‡½æ•°è€Œä¸æ˜¯å®. åŒæ ·, å®ƒä¹Ÿèƒ½è®© <code>Writer::new_file(...)</code> æˆä¸ºå¯èƒ½, è€Œä¸å¿…ä½¿ç”¨å®.</p>
<p>è¿™æ ·åšçš„æœ‰æ•ˆæ–¹å¼æ˜¯å…è®¸æŸäº›å‡½æ•°å°†å¯¹è±¡æ”¾å…¥è°ƒç”¨è€…çš„å †æ ˆæ¡†æ¶ä¸­, ç„¶åå¯ä»¥ä»è¿”å›å€¼ä¸­å¼•ç”¨è¿™äº›å¯¹è±¡. è¿™åœ¨ä»»ä½•æ™®é€šçš„æ—§å‡½æ•°ä¸­éƒ½æ˜¯è¡Œä¸é€šçš„ï¼›é€šå¸¸æƒ…å†µä¸‹, è°ƒç”¨è€…ä¸ä¼šä¸ºå‡½æ•°é¢„ç•™æ”¾ç½®å¯¹è±¡çš„ç©ºé—´. è¿™éœ€è¦æˆä¸ºå‡½æ•°ç­¾åçš„ä¸€éƒ¨åˆ†.</p>
<p>ä¹Ÿè®¸å¯ä»¥è¿™æ ·?</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub placing fn new_file(filename: &amp;str) -&gt; Writer {
    super let mut file = File::create(filename).unwrap(); // Placed into caller's stack frame
    Writer::new(&amp;file) // So we can borrow it in the return value!
}
<span class="boring">}</span></code></pre></pre>
<p>è¿™ä¸æ˜¯æˆ‘ç°åœ¨æå‡ºçš„å»ºè®®çš„ä¸€éƒ¨åˆ†, ä½†æƒ³æƒ³ä¹Ÿå¾ˆæœ‰è¶£. ï¼‰</p>
<h2 id="ä¸´æ—¶ç”Ÿå‘½å‘¨æœŸ-2024-rfc"><a class="header" href="#ä¸´æ—¶ç”Ÿå‘½å‘¨æœŸ-2024-rfc">ä¸´æ—¶ç”Ÿå‘½å‘¨æœŸ 2024 RFC</a></h2>
<p>å‡ ä¸ªæœˆå‰, æˆ‘ä¸<em>Niko Matsakis</em>å’Œ<em>Ding Xiang Fei</em>åˆ†äº«äº†æˆ‘çš„æƒ³æ³•--<code>super let</code>.ä»–ä»¬ä¸€ç›´åœ¨åŠªåŠ›åˆ¶å®š<code>super let</code>çš„ç¡®åˆ‡å®šä¹‰å’Œè¯¦ç»†è§„åˆ™, ä»¥åŠä¸‹ä¸€ç‰ˆ<code>Rust</code>çš„ä¸´æ—¶ç”Ÿå‘½å‘¨æœŸçš„ä¸€äº›æ–°è§„åˆ™.</p>
<p>è¿™é¡¹åä¸º <a href="https://rust-lang.zulipchat.com/#narrow/stream/403629-t-lang.2Ftemporary-lifetimes-2024"><code>â€œtemporary lifetimes 2024â€ effort</code></a>çš„è”åˆå·¥ä½œæ­£åœ¨ä¿ƒæˆä¸€é¡¹RFC, è¯¥RFCä¸»è¦å»ºè®®å°½å¯èƒ½å‡å°‘ä¸´æ—¶ç”Ÿå‘½å‘¨æœŸ, ä»¥é˜²æ­¢ <code>if let</code> æˆ–åŒ¹é…ä¸­çš„ä¸´æ—¶ <code>MutexGuard</code> å¯¼è‡´çš„æ­»é”, å¹¶æ·»åŠ  <code>super let</code> ä½œä¸ºé€‰æ‹©æ›´é•¿ç”Ÿå‘½å‘¨æœŸçš„ä¸€ç§æ–¹å¼.</p>
<h2 id="åé¦ˆ"><a class="header" href="#åé¦ˆ">åé¦ˆ</a></h2>
<p>ä½ æ˜¯å¦æœ‰æ„è¯†åœ°ä½¿ç”¨è¿‡ä¸´æ—¶å»¶é•¿å¯¿å‘½çš„æ–¹æ³•ï¼Ÿæˆ–è€…ä½ è¢«å®ƒå’¬è¿‡å—ï¼Ÿ</p>
<p>ä½ æ€ä¹ˆçœ‹<code>super let</code>ï¼Ÿä½ ä¼šä½¿ç”¨å®ƒå—ï¼Ÿæˆ–è€…ä½ æœ‰æ›´å¥½çš„ä¸»æ„ï¼Ÿ</p>
<p>è¯·åœ¨ä¸‹é¢çš„è¯„è®ºæˆ– <code>GitHub</code> ä¸Šå‘Šè¯‰æˆ‘, æˆ–åŠ å…¥ <code>Reddit``ã€Twitter</code> æˆ– <code>Mastodon</code> ä¸Šçš„è®¨è®º.</p>
<h2 id="å¼•ç”¨"><a class="header" href="#å¼•ç”¨">å¼•ç”¨</a></h2>
<hr>
<ol class="footnote-definition"><li id="footnote-1">
<p><a href="https://blog.m-ou.se/super-let/">Rust Temporary Lifetimes and "Super Let"</a> <a href="#fr-1-1">â†©</a></p>
</li>
</ol>
                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../daily-rust/01-using-immut-vec.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../daily-rust/03-macro.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../daily-rust/01-using-immut-vec.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../daily-rust/03-macro.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>



        <script>
            window.playground_line_numbers = true;
        </script>

        <script>
            window.playground_copyable = true;
        </script>

        <script src="../ace.js"></script>
        <script src="../mode-rust.js"></script>
        <script src="../editor.js"></script>
        <script src="../theme-dawn.js"></script>
        <script src="../theme-tomorrow_night.js"></script>

        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->



    </div>
    </body>
</html>
